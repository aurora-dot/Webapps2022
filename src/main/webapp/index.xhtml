<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
>
  <h:head>
    <title>Home | PalPay</title>
  </h:head>
  <h:body>
    <h1>PalPay.</h1>

    <c:if test="#{loginBean.visitorUser}">
      <h3>Hello user: <h:outputText value="${request.remoteUser}" /></h3>
      <h4>Your account has <h:outputText value="${transactionBean.getCurrentUserCurrencyCountAsString(request.remoteUser)}"/></h4>
      <div><h:link value="Go to a user page" outcome="user" /></div>
    </c:if>

    <c:if test="#{loginBean.visitorAdmin}">
      <h3>Hello admin: <h:outputText value="${request.remoteUser}" /></h3>
      <div><h:link value="Go to a admin page" outcome="admin" /></div>
      <div>
        <h:link value="Register new admin" outcome="registrationAdmin" />
      </div>
    </c:if>

    <c:if test="#{!(loginBean.visitorAdmin || loginBean.visitorUser)}">
        <div>
          <h:link
            value="Login"
            outcome="login"
            rendered="#{empty request.remoteUser}"
          />
          | 
          <h:link
            value="Register"
            outcome="registration"
            rendered="#{empty request.remoteUser}"
          />
        </div>
    </c:if>

    <c:if test="#{loginBean.visitorAdmin || loginBean.visitorUser}">
      <br />
      <br />
    </c:if>

    <h:form rendered="#{not empty request.remoteUser}">
      Logout: <h:commandButton value="Logout" action="#{loginBean.logout()}" />
    </h:form>
  </h:body>
</html>
